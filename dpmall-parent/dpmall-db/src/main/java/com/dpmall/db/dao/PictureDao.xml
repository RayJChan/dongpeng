<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dpmall.db.dao.PictureDao">

	<resultMap id="PictureMap" type="com.dpmall.db.bean.PictureEntity">
	    <id property="id" column="PK" />
	    <result property="title" column="title" />
	    <result property="content" column="content" />
	    <result property="name" column="name" />
	    <result property="pictureType" column="pictureType" />
	    
	     
	</resultMap>
	<select id="getPicture" resultMap="PictureMap">
		SELECT
			id as pk,
			title AS title,
			content AS content,
			name AS name,
			picture_type AS pictureType
		FROM
			tb_sys_record_picture P
		WHERE 1=1
			  AND picture_type = #{pictureType}
		ORDER BY
			P .create_time ASC
		
	</select>
	
	
	<insert id="uploadPicture">
		INSERT INTO PICTUREOFDPMALL P (
			HJMPTS,
			CREATEDTS,
			MODIFIEDTS,
			TYPEPKSTRING,
			pk,
			P_ID,
			<if test="entity.title != null">
			P_TITLE,
			</if>
			<if test="entity.content != null">
			P_CONTENT,
			</if>
			P_NAME,
			P_PICTURETYPE
		)
		VALUES
			(
				'0',
				SYSDATE,
				SYSDATE,
				'8796135915602',
				#{entity.id},
				#{entity.id},
				<if test="entity.title != null">
				#{entity.title},
				</if>
				<if test="entity.content != null">
				#{entity.content},
				</if>
				#{entity.name},
				#{entity.pictureType}
			)
	</insert>
	
	<!-- 查看首页照片 -->
	<select id="getHomePagePicture" resultMap="PictureMap">
		SELECT
			id as pk,
			title AS title,
			content AS content,
			name AS name,
			picture_type AS pictureType
		FROM
			dbo.tb_sys_record_picture
		WHERE
			1 = 1
		AND picture_type IN ('A-1','A-2','A-3')
		ORDER BY
			picture_type,
			create_time DESC
		
	</select>
	
	
	
	
</mapper>